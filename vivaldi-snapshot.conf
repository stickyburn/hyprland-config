# Vivaldi flags for Arch Linux with AMD GPU (7800XT) on Hyprland (Wayland)
# Based on Chromium ArchWiki recommendations for performance and Wayland rendering.
# Note: The ArchWiki states that comments (#) are skipped by the Chromium launcher script,
# but this might not apply to how Vivaldi parses this file if it's direct.
# Test if issues arise; if so, remove comments.

# --- Native Wayland Support ---
# Force the browser to use the Wayland backend.
# This is explicit and can resolve issues like transparency problems noted in the wiki for Chromium 124.
--ozone-platform=wayland

# Enable Wayland Input Method Editor (IME) support.
# Hyprland implements the necessary text_input_v1 protocol.
--enable-wayland-ime
--wayland-text-input-version=3

# --- GPU Acceleration & Performance ---
# Ignore the GPU blocklist. This can enable hardware acceleration on GPUs
# that might otherwise be blocked. Use with caution, as the wiki warns it may cause unstable behavior.
--ignore-gpu-blocklist

# Enable zero-copy texture uploads, often beneficial with an ignored GPU blocklist.
--enable-zero-copy

# Enable GPU rasterization on all pages for potentially faster rendering.
--enable-gpu-rasterization

# --- Hardware Video Acceleration (VA-API) & Vulkan Rendering for AMD ---
# This set of features is crucial for leveraging your AMD 7800XT for video
# decoding/encoding and Vulkan rendering on Wayland.
# Requires Mesa >= 24.1 (standard on an up-to-date Arch system).
# - VaapiVideoDecoder: Enables hardware video decoding using VA-API.
# - AcceleratedVideoEncoder: Enables hardware video encoding using VA-API.
# - VaapiIgnoreDriverChecks: Can help if VA-API isn't detected correctly or if there are driver compatibility issues.
# - Vulkan: Enables the Vulkan rendering backend.
# - DefaultANGLEVulkan: Uses Vulkan as the backend for ANGLE (which translates OpenGL ES calls).
# - VulkanFromANGLE: Further configuration for ANGLE on Vulkan.
--enable-features=VaapiVideoDecoder,AcceleratedVideoEncoder,VaapiIgnoreDriverChecks,Vulkan,DefaultANGLEVulkan,VulkanFromANGLE
